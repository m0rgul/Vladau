<!DOCTYPE html>
<html lang="en">
<head>
    <% include template/head.ejs %>
</head>
<body id="forgotPass" ng-app="passReset">

<div id="passRecovery" ng-controller="passResetCtrl">
    <form id="passRecoveryForm" name="passRecoveryForm">
        <img src="/img/PDA_logo.png" alt="logo" class="logoImg img-responsive"/>

        <div class="form-group"
             ng-class="{'has-error' : passRecoveryForm.password.$invalid && !passRecoveryForm.password.$pristine, 'has-success' : passRecoveryForm.password.$valid && !passRecoveryForm.password.$pristine}">
            <div class="input-group">
            <span class="input-group-addon">
                <i class="fa fa-unlock fa-lg fa-fw"></i>
            </span>
                <input type="password" class="form-control" placeholder="Parola" aria-describedby="sizing-addon1"
                       name="password" required ng-model="password" ng-model-options="{ updateOn: 'blur' }"
                       ng-minlength="8">
            </div>
            <span class="help-block text-center"
                  ng-show="passRecoveryForm.password.$error.minlength && !passRecoveryForm.password.$pristine">Parola trebuie sa aiva cel putin 8 caractere.</span>
            <span class="help-block text-center"
                  ng-show="!passRecoveryForm.password.$error.minlength && passRecoveryForm.password.$invalid && !passRecoveryForm.password.$pristine">Parola trebuie sa contina cel putin o cifra si o litera mare.</span>
        </div>

        <div class="form-group"
             ng-class="{'has-error' : passRecoveryForm.password2.$invalid && !passRecoveryForm.password2.$pristine, 'has-success' : passRecoveryForm.password2.$valid && !passRecoveryForm.password2.$pristine}">
            <div class="input-group">
                <span class="input-group-addon">
                <i class="fa fa-unlock fa-lg fa-fw"></i>
                </span>
                <input type="password" class="form-control" placeholder="Repetati parola"
                       aria-describedby="sizing-addon1" name="password2" required ng-model="password2">
            </div>
            <span class="help-block text-center"
                  ng-show="passRecoveryForm.password2.$error.match && !passRecoveryForm.password2.$pristine">Parolele nu se potrivesc.</span>
        </div>
        <input type="hidden" id="level" name="level" value="<%= user.level %>"/>

        <button class="btn btn-success center-block" type="button" ng-click="resetPassword()"
                ng-disabled="passRecoveryForm.$invalid">
            Resetare parola
        </button>
    </form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="/js/forge-sha256.min.js"></script>
<script src="/js/angular.js"></script>
<script src="/js/passReset.js"></script>

</body>
</html>